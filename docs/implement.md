# 実装（TDD） - 蔵書管理アプリ

このドキュメントは、テスト駆動開発（TDD）のアプローチを用いて実装を進める際の指針を記述する。

## TDDサイクル

すべての機能実装は、以下のサイクルに従う。

1.  **Red:** 失敗するテストを書く。このテストは、これから実装する機能の仕様をコードで表現したものである。
2.  **Green:** テストが通る最小限のコードを書く。この段階では、コードの綺麗さよりも、まずテストをパスさせることを優先する。
3.  **Refactor:** テストが通る状態を維持しながら、コードをクリーンにする（重複の排除、命名の改善など）。

## Backend実装のTDD手順例 (書籍登録機能)

1.  **Red:**
    - `test_main.py` を作成。
    - 書籍データ（JSON）を `POST /api/books/` に送信し、ステータスコード `201` (Created) と、レスポンスボディに登録されたデータが含まれることを検証するテストケース `test_create_book` を書く。
    - この時点ではエンドポイントが存在しないため、テストは失敗する。

2.  **Green:**
    - `main.py` に `POST /api/books/` エンドポイントを最小限の形で実装する。
    - リクエストボディを受け取り、それをそのまま返すだけでも良い。
    - `crud.py` に `create_book` 関数を作成し、データベースにデータを保存するロジックを実装する。
    - `main.py` から `crud.create_book` を呼び出すように修正し、テストが通ることを確認する。

3.  **Refactor:**
    - `main.py` や `crud.py` のコードを見直し、変数名が適切か、重複したコードはないかなどを確認し、リファクタリングする。
    - リファクタリング後、再度テストを実行し、すべてパスすることを確認する。

---

このアプローチを `doc/tasks.md` の各タスクに適用して開発を進める。
